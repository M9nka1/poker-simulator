# ü™ë –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ –º–µ—Å—Ç –≤ Summary

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–í **Summary** —Å–µ–∫—Ü–∏–∏ Hand History –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –º–µ—Å—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä:

**–í —à–∞–ø–∫–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```
Seat 1: Pio_OOP_3bet_SB ($1000.00 in chips)
Seat 6: Pio_IP_c3bBU ($1000.00 in chips)
```

**–í Summary (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```
Seat 1: Pio_IP_c3bBU showed [Ks Qs] and lost
Seat 2: Pio_OOP_3bet_SB showed [9d 9s] and won ($218.50)
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ú–µ—Ç–æ–¥ `generateSummary()` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ID –∏–≥—Ä–æ–∫–æ–≤ (`player.id = 1, 2`) –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –º–µ—Å—Ç –∏–∑ –ø—Ä–µ—Ñ–ª–æ–ø —Ñ–∞–π–ª–∞.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getPlayerSeatMapping()`

–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω –∏–≥—Ä–æ–∫–æ–≤ –∏ –Ω–æ–º–µ—Ä–æ–≤ –º–µ—Å—Ç –∏–∑ –ø—Ä–µ—Ñ–ª–æ–ø —Ñ–∞–π–ª–∞:

```javascript
getPlayerSeatMapping(preflopHistory) {
  if (!preflopHistory) return {};
  
  const lines = preflopHistory.split('\n');
  const seatMapping = {};
  
  for (const line of lines) {
    const trimmedLine = line.trim();
    
    // –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Seat –Ω–æ–º–µ—Ä -> –∏–º—è –∏–≥—Ä–æ–∫–∞
    const seatMatch = trimmedLine.match(/Seat (\d+): (\w+) \([\$‚Ç¨](\d+(?:\.\d+)?) in chips\)/);
    if (seatMatch) {
      const seatNumber = parseInt(seatMatch[1]);
      const playerName = seatMatch[2];
      seatMapping[playerName] = seatNumber;
    }
    
    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è –Ω–∞ HOLE CARDS
    if (trimmedLine.includes('*** HOLE CARDS ***')) {
      break;
    }
  }
  
  return seatMapping;
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `generateSummary()`

–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –º–µ—Å—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤:

```javascript
generateSummary(table) {
  // ... –∫–æ–¥ –¥–ª—è –±–∞–Ω–∫–∞ –∏ –±–æ—Ä–¥–∞ ...
  
  // –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω –∏–≥—Ä–æ–∫–æ–≤ –∏ –Ω–æ–º–µ—Ä–æ–≤ –º–µ—Å—Ç –∏–∑ –ø—Ä–µ—Ñ–ª–æ–ø —Ñ–∞–π–ª–∞
  const seatMapping = this.getPlayerSeatMapping(this.preflopHistory);
  const activePlayers = this.getActivePlayers(this.preflopHistory);
  
  // –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–µ—Ñ–ª–æ–ø –∏—Å—Ç–æ—Ä–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏ –º–µ—Å—Ç
  if (this.preflopHistory && Object.keys(seatMapping).length > 0) {
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –Ω–æ–º–µ—Ä–∞–º –º–µ—Å—Ç
    const sortedSeats = Object.entries(seatMapping).sort((a, b) => a[1] - b[1]);
    
    for (const [playerName, seatNumber] of sortedSeats) {
      const tablePlayer = table.players.find(p => p.name === playerName);
      
      if (tablePlayer) {
        // –ò–≥—Ä–æ–∫ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø–æ—Å—Ç—Ñ–ª–æ–ø –∏–≥—Ä–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        if (table.winner === tablePlayer.id) {
          summary += `Seat ${seatNumber}: ${playerName} showed [cards] and won ($amount)\n`;
        } else {
          summary += `Seat ${seatNumber}: ${playerName} showed [cards] and lost\n`;
        }
      } else if (!activePlayers.includes(playerName)) {
        // –ò–≥—Ä–æ–∫ —Å—Ñ–æ–ª–¥–∏–ª –≤ –ø—Ä–µ—Ñ–ª–æ–ø–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
        summary += `Seat ${seatNumber}: ${playerName}\n`;
      }
    }
  }
  
  return summary;
}
```

## üìã –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π Summary:**
```
*** SUMMARY ***
Total pot $230.00 | Rake $11.50
Board [9h 8s 8c 3s Js]
Seat 1: Pio_OOP_3bet_SB showed [9d 9s] and won ($218.50)
Seat 2: Pio_BB
Seat 3: Pio_EP
Seat 4: Pio_MP
Seat 5: Pio_CO
Seat 6: Pio_IP_c3bBU showed [Ks Qs] and lost
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç `test_seat_mapping.js` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```javascript
// –¢–µ—Å—Ç–∏—Ä—É–µ–º –º–µ—Ç–æ–¥ getPlayerSeatMapping
const seatMapping = generator.getPlayerSeatMapping(preflopHistory);
console.log('Seat mapping:', seatMapping);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: { Pio_OOP_3bet_SB: 1, Pio_BB: 2, ..., Pio_IP_c3bBU: 6 }

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–æ–≤ –º–µ—Å—Ç –≤ Summary
const hasCorrectSeats = handHistory.includes('Seat 1: Pio_OOP_3bet_SB') && 
                       handHistory.includes('Seat 6: Pio_IP_c3bBU');
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞:**
```
=== SEAT VALIDATION ===
Seat 1: Pio_OOP_3bet_SB showed [9d 9s] and won ($227.00)
Seat 2: Pio_BB
Seat 3: Pio_EP
Seat 4: Pio_MP
Seat 5: Pio_CO
Seat 6: Pio_IP_c3bBU showed [Ks Qs] and lost

‚úÖ Correct seat numbers: YES
üéâ Seat mapping is now correct!
```

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü–æ–∫–∞–∑ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å –∫–∞—Ä—Ç–∞–º–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
- **–°—Ñ–æ–ª–¥–∏–≤—à–∏–µ –≤ –ø—Ä–µ—Ñ–ª–æ–ø–µ:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å –∏–º–µ–Ω–µ–º
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –ü–æ –Ω–æ–º–µ—Ä–∞–º –º–µ—Å—Ç (1, 2, 3, 4, 5, 6)

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–µ—Ñ–ª–æ–ø —Ñ–∞–π–ª–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
- Fallback –∫ `player.id` –¥–ª—è —Å–µ—Å—Å–∏–π –±–µ–∑ –ø—Ä–µ—Ñ–ª–æ–ø –∏—Å—Ç–æ—Ä–∏–∏

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getPlayerSeatMapping()`
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `generateSummary()`
3. ‚úÖ –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ
4. üîÑ –ì–æ—Ç–æ–≤–æ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ GitHub

---

üéâ **Summary —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –º–µ—Å—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–µ—Ñ–ª–æ–ø —Ñ–∞–π–ª—É!**

üìñ **–°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_INVALID_DECK.md](–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_INVALID_DECK.md)
- [–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–§–û–†–ú–ê–¢–ê_–ö–ê–†–¢.md](–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–§–û–†–ú–ê–¢–ê_–ö–ê–†–¢.md) 