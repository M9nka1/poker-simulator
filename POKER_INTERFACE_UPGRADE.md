# 🎮 Улучшенный интерфейс покерного стола

## 🎯 Что изменилось

Полностью переработан интерфейс действий в покерном симуляторе для более интуитивного и логичного взаимодействия.

## ✨ Новая логика кнопок

### 🟢 Начальная ситуация (никто не ставил)
**Доступные действия:**
- **✋ ЧЕК** - пропустить ход без ставки
- **💰 БЕТ €X** - сделать ставку выбранного размера

### 🔴 После ставки оппонента
**Доступные действия:**
- **🗂️ ФОЛД** - сбросить карты
- **📞 КОЛЛ €X** - уравнять ставку оппонента  
- **🚀 РЕЙЗ €X** - поднять ставку

## 🎚️ Система выбора размеров

### Кнопки сайзинга (сверху):
- **25%** - четверть банка
- **50%** - половина банка  
- **75%** - три четверти банка
- **100%** - размер банка
- **All-in** - весь стек

### Как работает:
1. **Выбираете размер** - нажимаете одну из кнопок сайзинга
2. **Кнопка подсвечивается** - показывает выбранный размер
3. **Основная кнопка обновляется** - БЕТ/РЕЙЗ показывает точную сумму
4. **Делаете действие** - нажимаете БЕТ/РЕЙЗ с выбранным размером

## 🔄 Автоматические сбросы

Выбранный размер автоматически сбрасывается:
- ✅ При смене хода
- ✅ При переходе на новую улицу  
- ✅ При начале новой руки
- ✅ При обновлении стола

## 📱 Интерфейс

### Структура (сверху вниз):
```
┌─────────────────────────────────────┐
│ Размер: [25%] [50%] [75%] [100%] [All-in] │
├─────────────────────────────────────┤
│     [ЧЕК]    [БЕТ €100]            │
│  или                                │  
│  [ФОЛД]  [КОЛЛ €50]  [РЕЙЗ €150]   │
├─────────────────────────────────────┤
│ Выбранный размер: €100 [✕ сбросить] │
└─────────────────────────────────────┘
```

### Стили кнопок:
- **Кнопки сайзинга**: Маленькие, оранжевые, подсвечиваются при выборе
- **Основные действия**: Большие, цветные, с иконками и суммами
- **Сброс размера**: Маленькая красная кнопка ✕

## 🎯 Примеры использования

### Сценарий 1: Простой бет
```
1. Игрок видит: [ЧЕК] [БЕТ €50] + кнопки размеров
2. Нажимает "50%" → кнопка подсвечивается  
3. БЕТ обновляется: "БЕТ €100"
4. Нажимает БЕТ → ставка €100
5. Оппонент видит: [ФОЛД] [КОЛЛ €100] [РЕЙЗ €150]
```

### Сценарий 2: Рейз
```
1. Оппонент выбирает "75%" → €150 + €100 колл = €250
2. РЕЙЗ показывает: "РЕЙЗ €250"  
3. Нажимает РЕЙЗ → рейз до €250
4. Первый игрок видит: [ФОЛД] [КОЛЛ €150] [РЕЙЗ €X]
```

### Сценарий 3: Быстрые действия
```
1. Без выбора размера → используется размер по умолчанию (50%)
2. ЧЕК/ФОЛД/КОЛЛ → работают без выбора размера
3. Сброс размера → кнопка "✕ сбросить"
```

## 🚀 Преимущества

### 🎯 Логичность
- **Интуитивно понятно**: ЧЕК/БЕТ в начале, ФОЛД/КОЛЛ/РЕЙЗ после ставки
- **Соответствует покеру**: логика действий как в реальной игре
- **Четкое разделение**: сначала размер, потом действие

### ⚡ Удобство  
- **Быстрый выбор**: стандартные размеры одним кликом
- **Видимые суммы**: кнопки показывают точные суммы
- **Большие кнопки**: удобно нажимать на любых устройствах

### 🔄 Надежность
- **Автосброс**: размеры не "висят" между ходами  
- **Защита от ошибок**: невозможно сделать неправильное действие
- **Консистентность**: одинаковое поведение во всех ситуациях

## 🛠️ Технические детали

### Новые состояния:
```typescript
const [selectedBetAmount, setSelectedBetAmount] = useState<number>(0);
```

### Логика кнопок:
```typescript
// Начальная ситуация
{canCheck() && (
  <button onClick={() => makeAction('check')}>ЧЕК</button>
  <button onClick={() => makeAction('bet', selectedAmount)}>БЕТ</button>
)}

// После ставки
{canCall() && (
  <button onClick={() => makeAction('fold')}>ФОЛД</button>
  <button onClick={() => makeAction('call', getCallAmount())}>КОЛЛ</button>
  <button onClick={() => makeAction('raise', selectedAmount)}>РЕЙЗ</button>
)}
```

### Автосброс:
```typescript
useEffect(() => {
  setSelectedBetAmount(0); // При обновлении стола
}, [table]);

websocketService.onMessage('table_update', () => {
  setSelectedBetAmount(0); // При получении обновлений
});
```

## 📋 Файлы изменены

```
✅ client/src/components/MultiplayerPokerTable.tsx
✅ test_poker_interface.js (новый)
✅ POKER_INTERFACE_UPGRADE.md (новый)
```

## 🎮 Как тестировать

1. **Запустите сервер и клиент**:
   ```bash
   npm run server
   npm run client  
   ```

2. **Откройте два окна браузера** на `http://localhost:3000`

3. **Присоединитесь как Player 1 и Player 2**

4. **Протестируйте сценарии**:
   - ✅ ЧЕК → ЧЕК (переход на новую улицу)
   - ✅ БЕТ → ФОЛД/КОЛЛ/РЕЙЗ  
   - ✅ Выбор размеров кнопками
   - ✅ Автосброс размеров при смене хода

## 🎉 Результат

**Новый интерфейс покерного стола обеспечивает:**

- 🎯 **Интуитивность**: Логика действий соответствует реальному покеру
- ⚡ **Скорость**: Быстрый выбор стандартных размеров  
- 🎮 **Удобство**: Большие понятные кнопки с суммами
- 🔄 **Надежность**: Автоматические сбросы и защита от ошибок
- 📱 **Универсальность**: Работает на всех устройствах

💡 **Теперь игра в покер стала еще более реалистичной и удобной!** 