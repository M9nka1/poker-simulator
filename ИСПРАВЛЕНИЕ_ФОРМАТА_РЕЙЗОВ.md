# üìà –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Ä–µ–π–∑–æ–≤ –≤ Hand History

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–†–µ–π–∑—ã –≤ Hand History –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:

**‚ùå –ë—ã–ª–æ:**
```
Pio_OOP_3bet_SB: checks
Pio_IP_c3bBU: bets $76.00
Pio_OOP_3bet_SB: raises $191.00
Pio_IP_c3bBU: calls $191.00
```

**‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å (—Å—Ç–∞–Ω–¥–∞—Ä—Ç PokerStars):**
```
Pio_OOP_3bet_SB: checks
Pio_IP_c3bBU: bets $76.00
Pio_OOP_3bet_SB: raises $191.00 to $267.00
Pio_IP_c3bBU: calls $191.00
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í –º–µ—Ç–æ–¥–µ `generateStreetActions()` —Ä–µ–π–∑—ã –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —Å —Å—É–º–º–æ–π —Ä–µ–π–∑–∞, –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –æ–±—â–µ–π —Å—É–º–º—ã —Å—Ç–∞–≤–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "raises $X to $Y".

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `generateStreetActions()`

**–ë—ã–ª–æ:**
```javascript
case 'raise':
  actions += `${action.playerName}: raises ${this.currency}${action.amount}\n`;
  break;
```

**–°—Ç–∞–ª–æ:**
```javascript
case 'raise':
  // –î–ª—è raise –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "raises $X to $Y"
  // –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å—Ç–∞–≤–∫—É –Ω–∞ —É–ª–∏—Ü–µ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
  const previousBetActions = allActions.slice(0, index)
    .filter(a => a.action === 'bet' || a.action === 'raise');
  
  let currentMaxBet = 0;
  if (previousBetActions.length > 0) {
    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å—Ç–∞–≤–∫—É –Ω–∞ —É–ª–∏—Ü–µ
    let runningTotal = 0;
    for (const betAction of previousBetActions) {
      if (betAction.action === 'bet') {
        runningTotal = betAction.amount;
      } else if (betAction.action === 'raise') {
        runningTotal += betAction.amount;
      }
      currentMaxBet = Math.max(currentMaxBet, runningTotal);
    }
  }
  
  const totalBetAmount = currentMaxBet + action.amount;
  actions += `${action.playerName}: raises ${this.currency}${action.amount.toFixed(2)} to ${this.currency}${totalBetAmount.toFixed(2)}\n`;
  break;
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–ª–µ–Ω `playerId`** –∫ –¥–µ–π—Å—Ç–≤–∏—è–º –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤
2. **–£–ª—É—á—à–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É–º–º** —Å `.toFixed(2)` –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç "to" —Å—É–º–º—ã** –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç–∞–≤–æ–∫

## üìã –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞

### –ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è:
1. **Check:** –ò–≥—Ä–æ–∫ –Ω–µ —Å—Ç–∞–≤–∏—Ç –¥–µ–Ω–µ–≥
2. **Bet $76:** –ò–≥—Ä–æ–∫ —Å—Ç–∞–≤–∏—Ç $76
3. **Raise $191 to $267:** –ò–≥—Ä–æ–∫ –¥–æ–ø–ª–∞—á–∏–≤–∞–µ—Ç $191, –æ–±—â–∞—è —Å—Ç–∞–≤–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è $267 ($76 + $191)
4. **Call $191:** –í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫ –¥–æ–ø–ª–∞—á–∏–≤–∞–µ—Ç $191 –¥–æ –æ–±—â–µ–π —Å—É–º–º—ã $267

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:
```javascript
totalBetAmount = currentMaxBet + raiseAmount
```

–ì–¥–µ:
- `currentMaxBet` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ –Ω–∞ —É–ª–∏—Ü–µ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–π–∑–∞
- `raiseAmount` - —Å—É–º–º–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–π–∑–∞
- `totalBetAmount` - –æ–±—â–∞—è —Å—É–º–º–∞ —Å—Ç–∞–≤–∫–∏ –ø–æ—Å–ª–µ —Ä–µ–π–∑–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–µ–π–∑–æ–≤:
–°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–π–∑–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π —É–ª–∏—Ü–µ:
1. **Bet $58** ‚Üí currentMaxBet = $58
2. **Raise $202 to $260** ‚Üí currentMaxBet = $260 (58 + 202)
3. **Raise $389 to $649** ‚Üí currentMaxBet = $649 (260 + 389)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –û–¥–∏–Ω–æ—á–Ω—ã–π —Ä–µ–π–∑
```javascript
// –¢–µ—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
{action: 'check', street: 'flop', timestamp: 0},
{action: 'bet', amount: 76, street: 'flop', timestamp: 1},
{action: 'raise', amount: 191, street: 'flop', timestamp: 2}

// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
"Pio_OOP_3bet_SB: checks"
"Pio_IP_c3bBU: bets $76.00"
"Pio_OOP_3bet_SB: raises $191.00 to $267.00"
```

### –¢–µ—Å—Ç 2: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–π–∑—ã
```javascript
// –¢–µ—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
{action: 'check', street: 'flop', timestamp: 0},
{action: 'bet', amount: 58, street: 'flop', timestamp: 1},
{action: 'raise', amount: 202, street: 'flop', timestamp: 2},
{action: 'raise', amount: 389, street: 'flop', timestamp: 3}

// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
"Pio_OOP_3bet_SB: checks"
"Pio_IP_c3bBU: bets $58.00"
"Pio_OOP_3bet_SB: raises $202.00 to $260.00"  // 58 + 202 = 260
"Pio_IP_c3bBU: raises $389.00 to $649.00"     // 260 + 389 = 649
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤:**
```
=== VALIDATION ===
‚úÖ Pio_OOP_3bet_SB: checks
‚úÖ Pio_IP_c3bBU: bets $58.00
‚úÖ Pio_OOP_3bet_SB: raises $202.00 to $260.00
‚úÖ Pio_IP_c3bBU: raises $389.00 to $649.00

üéâ Multiple raises format: CORRECT
üéâ Multiple raises are now handled correctly!
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
*** FLOP *** [Qs As 2h]
Pio_OOP_3bet_SB: bets $115
Pio_IP_c3bBU: raises $345
Pio_OOP_3bet_SB: calls $345
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
*** FLOP *** [Qs As 2h]
Pio_OOP_3bet_SB: bets $115.00
Pio_IP_c3bBU: raises $345.00 to $460.00
Pio_OOP_3bet_SB: calls $345.00
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `generateStreetActions()`
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ "to" —Å—É–º–º—ã
3. ‚úÖ –£–ª—É—á—à–µ–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—É–º–º
4. ‚úÖ –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ
5. üîÑ –ì–æ—Ç–æ–≤–æ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ GitHub

---

üéâ **–†–µ–π–∑—ã —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ PokerStars: "raises $X to $Y"!**

üìñ **–°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_INVALID_DECK.md](–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_INVALID_DECK.md)
- [–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–ù–û–ú–ï–†–û–í_–ú–ï–°–¢.md](–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–ù–û–ú–ï–†–û–í_–ú–ï–°–¢.md) 